syntax = "proto3";
option java_multiple_files = true;
option java_package = "com.ocean.afefe.entities.proto";
option java_outer_classname = "CourseProto";
import "google/protobuf/struct.proto";
import "Common.proto";

service CourseMgtServiceGrpc {
    rpc CreateCourse(CreateCourseRequest) returns (CreateCourseResponse);
    rpc UpdateCourse(UpdateInstructorCourseRequest) returns (UpdateInstructorCourseResponse);
    rpc DeleteCourse(DeleteCourseRequest) returns (DeleteCourseResponse);
    rpc PublishCourse(PublishCourseRequest) returns (PublishCourseResponse);
    rpc CreateModule(CreateModuleRequest) returns (CreateModuleResponse);
    rpc UpdateModule(UpdateModuleRequest) returns (UpdateModuleResponse);
    rpc DeleteModule(DeleteModuleRequest) returns (DeleteModuleResponse);
    rpc CreateLesson(CreateLessonRequest) returns (CreateLessonResponse);
    rpc UpdateLesson(UpdateLessonRequest) returns (UpdateLessonResponse);
    rpc DeleteLesson(DeleteLessonRequest) returns (DeleteLessonResponse);
    rpc CreateLessonContent(CreateLessonContentRequest) returns (CreateLessonContentResponse);
    rpc UpdateLessonContent(UpdateLessonContentRequest) returns (UpdateLessonContentResponse);
    rpc DeleteLessonContent(DeleteLessonContentRequest) returns (DeleteLessonContentResponse);
    rpc CreateLessonAsset(CreateLessonAssetRequest) returns (CreateLessonAssetResponse);
    rpc UpdateLessonAsset(UpdateLessonAssetRequest) returns (UpdateLessonAssetResponse);
    rpc DeleteLessonAsset(DeleteLessonAssetRequest) returns (DeleteLessonAssetResponse);
    rpc CreateQuiz(CreateQuizRequest) returns (CreateQuizResponse);
    rpc CreateQuestionAndOption(CreateQuestionAndOptionRequest) returns (CreateQuestionAndOptionResponse);
    rpc FetchCourses(FetchCoursesRequest) returns (FetchCoursesResponse);
    rpc FetchModuleContent(FetchModuleContentRequest) returns (FetchModuleContentResponse);
    rpc FetchLessonContent(FetchLessonContentRequest) returns (FetchLessonContentResponse);
    rpc FetchCourseDetails(FetchCourseDetailsRequest) returns (FetchCourseDetailsResponse);
    rpc FetchQuizQuestions(FetchQuizQuestionsRequest) returns (FetchQuizQuestionsResponse);
    rpc FetchLessonQuizIds(FetchLessonQuizIdsRequest) returns (FetchLessonQuizIdsResponse);
    rpc FetchCourseInformation(FetchCourseInformationRequest) returns (FetchCourseInformationResponse);
    rpc FetchCourseRatings(InstructorFetchCourseRatingsRequest) returns (InstructorFetchCourseRatingsResponse);
}

// Enums
enum CourseStatusGrpc {
    COURSE_STATUS_UNSPECIFIED = 0;
    DRAFT = 1;
    PUBLISHED = 2;
    IN_REVIEW = 3;
}

enum LessonContentTypeGrpc {
    LESSON_CONTENT_TYPE_UNSPECIFIED = 0;
    VIDEO = 1;
    TEXT = 2;
    PDF = 3;
    INTERACTIVE = 4;
    SCORM = 5;
}

enum LessonAssetTypeGrpc {
    LESSON_ASSET_TYPE_UNSPECIFIED = 0;
    VIDEO_URL = 1;
    PDF_URL = 2;
    HTML = 3;
    SCORM_PKG = 4;
    IMAGE_URL = 5;
}

enum QuestionTypeGrpc {
  MULTI_CHOICE = 0;
  TRUE_FALSE = 1;
}

// Course Messages
message CreateCourseRequest {
    string title = 1;
    string coverImageUrl = 2;
    string description = 3;
    string summary = 4;
    repeated string tags = 5;
    repeated string requirements = 6;
    string price = 7;
    string currency = 8;
    repeated CourseProposedAchievementGrpc proposedAchievements = 9;
    string status = 10;
}

message CreateCourseResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseDataGrpc responseData = 3;
}

// Update Course Messages
message UpdateInstructorCourseRequest {
    string courseId = 1;
    string title = 2;
    string coverImageUrl = 3;
    string description = 4;
    string summary = 5;
    repeated string tags = 6;
    repeated CourseProposedAchievementGrpc proposedAchievements = 7;
    repeated string requirements = 8;
    string price = 9;
    string currency = 10;
    string level = 11;
    string language = 12;
    int32 estimatedMinutes = 13;
    int32 priceCents = 14;
    bool free = 15;
}

message UpdateInstructorCourseResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseDataGrpc responseData = 3;
}

message CourseProposedAchievementGrpc {
    int32 position = 1;
    string description = 2;
}

message CourseDataGrpc {
    string id = 1;
    string coverImageUrl = 2;
    string description = 3;
    string price = 4;
    string currency = 5;
    string title = 6;
    string slug = 7;
    string summary = 8;
    string level = 9;
    string language = 10;
    string status = 11;
    int32 estimatedMinutes = 12;
    int32 priceCents = 13;
    bool free = 14;
    repeated string tags = 15;
    repeated string requirements = 16;
    repeated CourseProposedAchievementGrpc learningOutcomes = 17;
    string lastUpdated = 18;
}

// Module Messages
message CreateModuleRequest {
    string courseId = 1;
    string title = 2;
    string summary = 3;
    int32 position = 4;
}

message CreateModuleResponse {
    string responseCode = 1;
    string responseMessage = 2;
    InstructorModuleDataGrpc responseData = 3;
}

// Update Module Messages
message UpdateModuleRequest {
    string moduleId = 1;
    string title = 2;
    string summary = 3;
    int32 position = 4;
}

message UpdateModuleResponse {
    string responseCode = 1;
    string responseMessage = 2;
    InstructorModuleDataGrpc responseData = 3;
}

message InstructorModuleDataGrpc {
    string id = 1;
    string courseVersionId = 2;
    string courseId = 3;
    string title = 4;
    string summary = 5;
    int32 position = 6;
}

// Lesson Messages
message CreateLessonRequest {
    string courseId = 1;
    string moduleId = 2;
    string title = 3;
    int32 position = 4;
}

message CreateLessonResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonData responseData = 3;
}

// Update Lesson Messages
message UpdateLessonRequest {
    string lessonId = 1;
    string courseId = 2;
    string moduleId = 3;
    string title = 4;
    int32 position = 5;
}

message UpdateLessonResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonData responseData = 3;
}

message LessonData {
    string id = 1;
    string moduleId = 2;
    string courseVersionId = 3;
    string title = 4;
    string content = 5;
    string contentType = 6;
    int32 durationSeconds = 7;
    int32 position = 8;
    bool isPublished = 9;
    repeated string quizIds = 10;
}

// Lesson Content Messages
message CreateLessonContentRequest {
    string lessonId = 1;
    string title = 2;
    string description = 3;
    string contentType = 4;
    int32 courseVersion = 5;
}

message CreateLessonContentResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CreateLessonContentDataGrpc responseData = 3;
}

// Update Lesson Content Messages
message UpdateLessonContentRequest {
    string lessonContentId = 1;
    string title = 2;
    string description = 3;
    string contentType = 4;
    int32 courseVersion = 5;
}

message UpdateLessonContentResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CreateLessonContentDataGrpc responseData = 3;
}

message CreateLessonContentDataGrpc {
    string id = 1;
    string lessonId = 2;
    string title = 3;
    string description = 4;
    string contentType = 5;
    int32 courseVersion = 6;
}

// Delete Lesson Content Messages
message DeleteLessonContentRequest {
    string lessonContentId = 1;
}

message DeleteLessonContentResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CreateLessonContentDataGrpc responseData = 3;
}

// Lesson Asset Messages
message CreateLessonAssetRequest {
    string lessonContentId = 1;
    string assetType = 2;
    string uri = 3;
    string lessonText = 4;
    string checksum = 5;
    int64 fileSizeBytes = 6;
    string mimeType = 7;
    int32 assetOrder = 8;
}

message CreateLessonAssetResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonAssetData responseData = 3;
}

// Update Lesson Asset Messages
message UpdateLessonAssetRequest {
    string lessonAssetId = 1;
    string lessonContentId = 2;
    string assetType = 3;
    string uri = 4;
    string lessonText = 5;
    string checksum = 6;
    int64 fileSizeBytes = 7;
    string mimeType = 8;
    int32 assetOrder = 9;
}

message UpdateLessonAssetResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonAssetData responseData = 3;
}

message LessonAssetData {
    string id = 1;
    string lessonContentId = 2;
    string assetType = 3;
    string uri = 4;
    string lessonText = 5;
    string checksum = 6;
    int64 fileSizeBytes = 7;
    string mimeType = 8;
    int32 assetOrder = 9;
}

// Delete Lesson Asset Messages
message DeleteCourseRequest {
    string courseId = 1;
}

message DeleteCourseResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseDataGrpc responseData = 3;
}

// Publish Course Messages
message PublishCourseRequest {
    string courseId = 1;
}

message PublishCourseResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseDataGrpc responseData = 3;
}

message DeleteModuleRequest {
    string moduleId = 1;
}

message DeleteModuleResponse {
    string responseCode = 1;
    string responseMessage = 2;
    InstructorModuleDataGrpc responseData = 3;
}

message DeleteLessonRequest {
    string lessonId = 1;
}

message DeleteLessonResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonDetailsDataGrpc responseData = 3;
}

message DeleteLessonAssetRequest {
    string lessonAssetId = 1;
    string lessonContentId = 2;
}

message DeleteLessonAssetResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonAssetData responseData = 3;
}

message CreateQuizRequest {
    string courseId = 1;
    string moduleId = 2;
    string lessonId = 3;
    string title = 4;
}

message CreateQuestionAndOptionRequest{
   string quizId = 1;
   string type = 2;
   string text = 3;
   string explanation = 4;
   int32 difficultyLevel = 5;
   int64 points = 6;
   google.protobuf.Struct metaData = 7;
   repeated QuestionOptionRequestPayloadGrpc options = 8;
}


message QuestionOptionRequestPayloadGrpc {
    string label = 1;
    string text = 2;
    bool isCorrect = 3;
    string feedback = 4;
    int32 position = 5;
}

message CreateQuizResponse {
  string responseCode = 1;
  string responseMessage = 2;
  CreateQuizResponseData responseData = 3;
}

message CreateQuizResponseData {
   string id = 1;
   string quizId = 2;
   string orgId = 3;
   string courseId = 4;
   string moduleId = 5;
   string lessonId = 6;
   string title = 7;
   string description = 8;
   int32 attemptLimit = 9;
   int32 timeLimitMinutes = 10;
   string gradingMethod = 11;
   string visibility = 12;
   int64 passScore =  13;
   bool randomizeItems = 14;
   string createdBy = 15;
   string updatedBy = 16;
}

message CreateQuestionAndOptionResponse {
  string responseCode = 1;
  string responseMessage = 2;
  CreateQuestionAndOptionResponseData responseData = 3;
}


message CreateQuestionAndOptionResponseData {
   string quizId = 1;
   string type = 2;
   string text = 3;
   string explanation = 4;
   int32 difficultyLevel = 5;
   int32 points = 6;
   google.protobuf.Struct metaData = 7;
}

// Fetch Lesson Content Messages
message FetchLessonContentRequest {
    string lessonId = 1;
}

message FetchLessonContentResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonContentDataGrpc responseData = 3;
}

message LessonContentDataGrpc {
    LessonData lessonData = 1;
    repeated LessonContentWithAssetsDataGrpc lessonContents = 2;
}

message LessonContentWithAssetsDataGrpc {
    string id = 1;
    string lessonId = 2;
    string title = 3;
    string description = 4;
    string contentType = 5;
    int32 courseVersion = 6;
    repeated LessonAssetData assets = 7;
}

// Fetch Course Details Messages
message FetchCourseDetailsRequest {
    string courseId = 1;
}

message FetchCourseDetailsResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseContentDataGrpc responseData = 3;
}

message CourseContentDataGrpc {
    repeated ModuleContentDataGrpc moduleContentData = 1;
}

message ModuleContentDataGrpc {
    string moduleId = 1;
    string moduleTitle = 2;
    string moduleSummary = 3;
    int32 modulePosition = 4;
    repeated LessonDetailsDataGrpc lessonDetailsData = 5;
}

message LessonDetailsDataGrpc {
    string lessonId = 1;
    string lessonTitle = 2;
    int32 position = 3;
    QuizContentDataGrpc quizContentData = 4;
}

// Fetch Courses Messages
message FetchCoursesRequest {
    int32 pageNumber = 1; // Page number (0-based)
    int32 pageSize = 2;   // Number of items per page
    string sort = 3;      // Sort direction
    string status = 4;    // Course status filter (DRAFT, IN_REVIEW, PUBLISHED)
}

message FetchCoursesResponse {
    string responseCode = 1;
    string responseMessage = 2;
    FetchCoursesDataGrpc responseData = 3;
}

message FetchCoursesDataGrpc {
    PaginationMetaGrpc meta = 1;
    repeated CourseDataGrpc content = 2;
}

// Fetch Module Content Messages
message FetchModuleContentRequest {
    string moduleId = 1;
}

message FetchModuleContentResponse {
    string responseCode = 1;
    string responseMessage = 2;
    ModuleContentDataGrpc responseData = 3;
}

message QuizContentDataGrpc {
    string quizId = 1;
    string quizTitle = 2;
}

// Fetch Quiz Questions Messages
message FetchQuizQuestionsRequest {
    string lessonId = 1;
}

message FetchQuizQuestionsResponse {
    string responseCode = 1;
    string responseMessage = 2;
    QuizQuestionsDataGrpc responseData = 3;
}

message QuizQuestionsDataGrpc {
    string lessonId = 1;
    repeated QuizQuestionsSectionGrpc quizSections = 2;
}

message QuizQuestionsSectionGrpc {
    string quizId = 1;
    string quizTitle = 2;
    repeated QuestionWithOptionsDataGrpc questions = 3;
}

message QuestionWithOptionsDataGrpc {
    string questionId = 1;
    string type = 2;
    string text = 3;
    string explanation = 4;
    int32 difficultyLevel = 5;
    int64 points = 6;
    google.protobuf.Struct metaData = 7;
    repeated QuestionOptionDataGrpc options = 8;
}

message QuestionOptionDataGrpc {
    string optionId = 1;
    string label = 2;
    string text = 3;
    bool isCorrect = 4;
    string feedback = 5;
    int32 position = 6;
}

// Fetch Lesson Quiz IDs Messages
message FetchLessonQuizIdsRequest {
    string lessonId = 1;
}

message FetchLessonQuizIdsResponse {
    string responseCode = 1;
    string responseMessage = 2;
    LessonQuizIdsDataGrpc responseData = 3;
}

message LessonQuizIdsDataGrpc {
    string lessonId = 1;
    repeated QuizInfoDataGrpc quizzes = 2;
}

message QuizInfoDataGrpc {
    string quizId = 1;
    string quizName = 2;
    int32 numberOfQuestions = 3;
}

// Fetch Course Information Messages
message FetchCourseInformationRequest {
    string courseId = 1; // Course UUID
}

message FetchCourseInformationResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseDataGrpc responseData = 3;
}

// Fetch Course Ratings Messages
message InstructorFetchCourseRatingsRequest {
    string courseId = 1; // Course UUID
}

message InstructorFetchCourseRatingsResponse {
    string responseCode = 1;
    string responseMessage = 2;
    CourseRatingsDataGrpc responseData = 3;
}

message CourseRatingsDataGrpc {
    repeated InstructorCourseReviewDataGrpc reviews = 1;
    int64 totalReviews = 2;
    double overallRating = 3;
    RatingDistributionDataGrpc ratingDistribution = 4;
}

message InstructorCourseReviewDataGrpc {
    string id = 1;
    string userId = 2;
    string userName = 3;
    int32 rating = 4;
    string review = 5;
    string ratedAt = 6;
    string updatedAt = 7;
}

message RatingDistributionDataGrpc {
    int64 oneStar = 1;
    int64 twoStar = 2;
    int64 threeStar = 3;
    int64 fourStar = 4;
    int64 fiveStar = 5;
}
